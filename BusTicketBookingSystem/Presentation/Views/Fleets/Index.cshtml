@using Domain.Models
@model List<Fleet>;

@{
    ViewData["Title"] = "Index";
}

<h1>Ticket Management System</h1>

<a class="btn btn-success" href="/Fleets/Create">Add New Fleet</a>

<hr>

@if (!Model.Any())
{
    <div class="alert alert-warning mt-4" role="alert">Unfortunately, there are no fleets available at the moment!</div>
}
else
{
    <div class="container mt-4">
        <div class="row mb-4">
            <div class="col-12 col-md-6 col-lg-4">
                <form action="/Fleets/Search" method="get" class="d-flex" role="search">
                    <input class="form-control me-2" type="text" placeholder="Search..." name="searchTerm"/>
                    <button class="btn btn-primary" type="submit">Search</button>
                </form>
            </div>
        </div>
        @if(ViewData["search_hits"] != null)
        {
            <div class="row mb-4">
                <small class="text-muted">This search has returned @ViewData["search_hits"] results.</small>
            </div>
        }
        @foreach (Fleet fleet in Model)
        {
            <div class="row mb-4 align-items-center">
                <div class="col-md-5 mb-3 mb-md-0">
                    <img class="img-fluid rounded fleet-img"
                         src="@(string.IsNullOrEmpty(fleet.ImagePath) ? "https://dummyimage.com/600x400/000/fff&text=No+image+available" : fleet.ImagePath)"
                         alt="@fleet.Name was built in @fleet.YearBuilt.">
                </div>
                <div class="col-md-7">
                    <h4>@fleet.Name</h4>
                    <p><strong>Built in:</strong> @fleet.YearBuilt</p>
                    <a class="btn btn-primary me-2" href="/Fleets/Edit/@fleet.Id">Edit</a>
                    <a class="btn btn-danger me-2" href="/Fleets/Delete/@fleet.Id">Delete</a>
                </div>
            </div>
        }
    </div>
}
